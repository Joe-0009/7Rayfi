{% extends "base.html" %}
{% block title %}Home{% endblock %}
{% block content %}
<div class="text-center">
    <h1 class="mb-4">Notes</h1>
    <ul class="list-group list-group-flush mb-4" id="notes">
        {% for note in user.notes %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
            {{ note.data }}
            <button type="button" class="close" onClick="deleteNote({{ note.id }})">
                <span aria-hidden="true">&times;</span>
            </button>
        </li>
        {% endfor %}
    </ul>
    <form method="POST">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <div class="form-group">
            <textarea name="note" id="note" class="form-control" rows="3" placeholder="Write your note here..."></textarea>
        </div>
        <button type="submit" class="btn btn-primary btn-block">Add Note</button>
    </form>
</div>

{% block javascript %}
<script type="text/javascript">
    function deleteNote(noteId) {
        fetch("/delete-note", {
            method: "POST",
            body: JSON.stringify({ noteId: noteId }),
            headers: {
                "Content-Type": "application/json",
                "X-CSRFToken": "{{ csrf_token() }}"
            }
        }).then((_res) => {
            window.location.href = "/";
        });
    }
</script>
{% endblock %}
{% endblock %}
